{"version":3,"sources":["App.js","index.js"],"names":["App","useState","longitude","latitude","zoom","width","window","innerWidth","height","innerHeight","viewport","setViewport","areas","setAreas","users","setUsers","showPopup","togglePopup","popData","setPopData","useEffect","a","fetch","then","res","json","new_areas","new_users","onViewportChange","newviewport","mapStyle","mapboxApiAccessToken","onClick","e","features","length","userdata","area_id","male","female","pro_users","total_users","forEach","element","gender","is_pro_user","getDetails","properties","lngLat","data","name","pin_code","id","type","paint","closeButton","closeOnClick","onClose","anchor","rootElement","document","getElementById","ReactDOM","render"],"mappings":"yLAGe,SAASA,IACtB,MAAgCC,mBAAS,CACvCC,UAAW,kBACXC,SAAU,mBACVC,KAAM,GACNC,MAAOC,OAAOC,WACdC,OAAQF,OAAOG,cALjB,mBAAOC,EAAP,KAAiBC,EAAjB,KAOA,EAA0BV,qBAA1B,mBAAOW,EAAP,KAAcC,EAAd,KACA,EAA0BZ,qBAA1B,mBAAOa,EAAP,KAAcC,EAAd,KACA,EAAiCd,oBAAS,GAA1C,mBAAOe,EAAP,KAAkBC,EAAlB,KACA,EAA8BhB,mBAAS,MAAvC,mBAAOiB,EAAP,KAAgBC,EAAhB,KA8BAC,qBAAU,WACR,sBAAC,sBAAAC,EAAA,sEACOC,MAAM,2CACTC,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACG,GAAD,OAAeb,EAASa,MAHjC,0CAAD,GAKA,sBAAC,sBAAAL,EAAA,sEACOC,MAAM,2CACTC,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACI,GAAD,OAAeZ,EAASY,EAAUb,UAH3C,0CAAD,KAKC,IAYH,OACE,cAAC,IAAD,2BACMJ,GADN,IAEEkB,iBAAkB,SAACC,GAAD,OAAiBlB,EAAYkB,IAC/CC,SAAU,kCACVC,qBACE,mGAEFC,QAAS,SAACC,GACR,GAAIA,EAAEC,SAASC,OAAS,EAAG,CACzB,IAAMC,EA7Dd,SAAoBC,GAClB,IAAIC,EAAO,EACPC,EAAS,EACTC,EAAY,EACZC,EAAc,EAgBlB,OAdA3B,EAAM4B,SAAQ,SAACC,GACTA,EAAQN,UAAYA,IACC,MAAnBM,EAAQC,OACVN,IAEAC,KAE0B,IAAxBI,EAAQE,aACVL,IAEFC,QAIG,CACLH,OACAC,SACAC,YACAC,eAqCqBK,CAAWb,EAAEC,SAAS,GAAGa,WAAWV,SACrDlB,EAAW,CACTjB,UAAW+B,EAAEe,OAAO,GACpB7C,SAAU8B,EAAEe,OAAO,GACnBC,KAAM,CACJC,KAAMjB,EAAEC,SAAS,GAAGa,WAAWG,KAC/Bb,QAASJ,EAAEC,SAAS,GAAGa,WAAWV,QAClCc,SAAUlB,EAAEC,SAAS,GAAGa,WAAWI,SACnCrC,MAAOsB,KAIXnB,GAAY,KArBlB,SAyBGL,GACC,eAAC,IAAD,CAAQwC,GAAG,UAAUC,KAAK,UAAUJ,KAAMrC,EAA1C,UACE,cAAC,IAAD,eAtCW,CACjBwC,GAAI,OACJC,KAAM,OACNC,MAAO,CACL,aAAc,UACd,eAAgB,GAChB,qBAAsB,cAiCjBtC,GACC,eAAC,IAAD,CACEb,SAAUe,EAAQf,SAClBD,UAAWgB,EAAQhB,UACnBqD,aAAa,EACbC,cAAc,EACdC,QAAS,kBAAMxC,GAAY,IAC3ByC,OAAO,MANT,UAQE,wCAASxC,EAAQ+B,KAAKC,QACtB,+CAAgBhC,EAAQ+B,KAAKnC,MAAMwB,QACnC,iDAAkBpB,EAAQ+B,KAAKnC,MAAMyB,UACrC,oDAAqBrB,EAAQ+B,KAAKnC,MAAM0B,aACxC,sDAAuBtB,EAAQ+B,KAAKnC,MAAM2B,wBCxGxD,IAAMkB,EAAcC,SAASC,eAAe,QAC5CC,IAASC,OACP,cAAC,aAAD,UACE,cAAC/D,EAAD,MAEF2D,K","file":"static/js/main.394e0573.chunk.js","sourcesContent":["import ReactMapGL, { Source, Layer, Popup } from \"react-map-gl\";\nimport { useEffect, useState } from \"react\";\n\nexport default function App() {\n  const [viewport, setViewport] = useState({\n    longitude: 77.74495913453232,\n    latitude: 12.993406628665984,\n    zoom: 10,\n    width: window.innerWidth,\n    height: window.innerHeight\n  });\n  const [areas, setAreas] = useState();\n  const [users, setUsers] = useState();\n  const [showPopup, togglePopup] = useState(false);\n  const [popData, setPopData] = useState(null);\n\n  function getDetails(area_id) {\n    let male = 0;\n    let female = 0;\n    let pro_users = 0;\n    let total_users = 0;\n\n    users.forEach((element) => {\n      if (element.area_id === area_id) {\n        if (element.gender === \"M\") {\n          male++;\n        } else {\n          female++;\n        }\n        if (element.is_pro_user === true) {\n          pro_users++;\n        }\n        total_users++;\n      }\n    });\n\n    return {\n      male,\n      female,\n      pro_users,\n      total_users\n    };\n  }\n\n  useEffect(() => {\n    (async function () {\n      await fetch(\"https://kyupid-api.vercel.app/api/areas\")\n        .then((res) => res.json())\n        .then((new_areas) => setAreas(new_areas));\n    })();\n    (async function () {\n      await fetch(\"https://kyupid-api.vercel.app/api/users\")\n        .then((res) => res.json())\n        .then((new_users) => setUsers(new_users.users));\n    })();\n  }, []);\n\n  const layerStyle = {\n    id: \"area\",\n    type: \"fill\",\n    paint: {\n      \"fill-color\": \"#00ffff\",\n      \"fill-opacity\": 0.7,\n      \"fill-outline-color\": \"#ff0000\"\n    }\n  };\n\n  return (\n    <ReactMapGL\n      {...viewport}\n      onViewportChange={(newviewport) => setViewport(newviewport)}\n      mapStyle={\"mapbox://styles/mapbox/basic-v9\"}\n      mapboxApiAccessToken={\n        \"pk.eyJ1Ijoibml0ZXNoc2g0cm1hIiwiYSI6ImNreHE4ZzJzdDFlYjMycHA3bXphYno3emcifQ.G690vt5K8bxhpPpyGLOEMA\"\n      }\n      onClick={(e) => {\n        if (e.features.length > 0) {\n          const userdata = getDetails(e.features[0].properties.area_id);\n          setPopData({\n            longitude: e.lngLat[0],\n            latitude: e.lngLat[1],\n            data: {\n              name: e.features[0].properties.name,\n              area_id: e.features[0].properties.area_id,\n              pin_code: e.features[0].properties.pin_code,\n              users: userdata\n            }\n          });\n\n          togglePopup(true);\n        }\n      }}\n    >\n      {areas && (\n        <Source id=\"my-data\" type=\"geojson\" data={areas}>\n          <Layer {...layerStyle} />\n          {showPopup && (\n            <Popup\n              latitude={popData.latitude}\n              longitude={popData.longitude}\n              closeButton={true}\n              closeOnClick={false}\n              onClose={() => togglePopup(false)}\n              anchor=\"top\"\n            >\n              <div>{`${popData.data.name}`}</div>\n              <div>{`Male - ${popData.data.users.male}`}</div>\n              <div>{`Female - ${popData.data.users.female}`}</div>\n              <div>{`Pro Users - ${popData.data.users.pro_users}`}</div>\n              <div>{`Total Users - ${popData.data.users.total_users}`}</div>\n            </Popup>\n          )}\n        </Source>\n      )}\n    </ReactMapGL>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}